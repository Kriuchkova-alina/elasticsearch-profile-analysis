# –ê–Ω–∞–ª–∏–∑ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –§–õ/–Æ–õ –∏–∑ Elasticsearch

## üîé –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∏–∑ Elasticsearch –≤ –≤–∏–¥–µ –ª–æ–≥–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è "—Å—ã—Ä—ã—Ö" —Å–æ–±—ã—Ç–∏–π –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π csv-–æ—Ç—á–µ—Ç, —Ä–∞—Å—á–µ—Ç –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏ –∏—Ö –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å–∞. 

–î–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç **–æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é** —Ä–µ—à–µ–Ω–∏—è, –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—É—é –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ. –í—Å—è –±–∏–∑–Ω–µ—Å-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ
–∞–Ω–∞–ª–æ–≥–∏. 

## üßÆ –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏
1. –û—á–∏—Å—Ç–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –¥–∞—Ç–∞—Ñ—Ä–µ–π–º–∞.
2. –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π, –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏. 
3. –†–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã –∏ –ø–æ–ª–Ω–æ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è)  
4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—á–∞—Å—Ç–∏—á–Ω–∞—è –∏–ª–∏ –ø–æ–ª–Ω–∞—è). 
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ csv-–æ—Ç—á–µ—Ç–∞.  
6. –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø–æ –∫–∞–∂–¥–æ–π –∏–∑ —Ñ–∞–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏: —Å—Ä–µ–¥–Ω–µ–µ, –º–µ–¥–∏–∞–Ω–∞, —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, –º–∏–Ω–∏–º—É–º, –º–∞–∫—Å–∏–º—É–º.  
7. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞.  

## üìö –î–∞—Ç–∞—Å–µ—Ç
**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `reportFromKibana.csv` (report) ‚Äî CSV-—Ñ–∞–π–ª —Å —Å–æ–±—ã—Ç–∏—è–º–∏ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø—Ä–æ—Ñ–∏–ª–µ–π (–∫–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8)  
  - `ComponentID` ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ
  - `OperationID` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
  - `PhaseID` ‚Äî –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–∑—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏  
  - `Source` ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ  
  - `SourceFileName` ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ   
  - `Timestamp` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –≤—ã–∑–æ–≤–∞ —Ñ–∞–∑—ã (—Ñ–æ—Ä–º–∞—Ç: YYYY-MM-DD-HH-MM-SS-SSS)  

**–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:**
- –ù–∞—á–∞–ª—å–Ω—ã–µ —Ñ–∞–∑—ã (–≤—Ö–æ–¥—è—â–∏–µ):
  - stage_Y
  -	U_profile_in
  -	X_message_profile_in
  -	M_message_profile_in
  -	B_message_profile_in
  - A_message_profile_in
  -	P_message_profile_in

- –§–∞–∑—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
  - lock_start ‚Äî –Ω–∞—á–∞–ª–æ –ø–æ–ø—ã—Ç–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  - lock_end ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

- –§–∞–∑—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö 1:
  -	stage_to_before_cons ‚Äî –Ω–∞—á–∞–ª–æ
  -	stage_before_cons ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
  
- –§–∞–∑—ã –ø–æ–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ –ë–î:
  -	stage_get, stage_get_ud
  -	stage_find, stage_find_ud

- –§–∞–∑—ã –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö 2:
  -	stage_to_after_cons ‚Äî –Ω–∞—á–∞–ª–æ
  -	stage_after_cons ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

- –§–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è:
  -	stage_json_insert, ud_response_insert
  -	stage_json_update, ud_response_update

- –§–∞–∑—ã –æ—Ç–ø—É—Å–∫–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
  -	unlock_start, unlock_end

- –ó–∞–≤–µ—Ä—à–∞—é—â–∏–µ —Ñ–∞–∑—ã (–∏—Å—Ö–æ–¥—è—â–∏–µ):
  - stage_Y_resp
  - U_profile_out
  - X_message_profile_out
  -	M_message_profile_out
  -	B_message_profile_out
  - A_message_profile_out
  -	P_message_profile_out

- –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ñ–∞–∑—ã (–Ω–µ –≤—Ö–æ–¥—è—â–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Ü–µ–ø–æ—á–∫—É):
  - stage_DB_validation_save
  - extval_from_DB_validServise_msg
  - stoplist_response
  - stoplist_response_org
  - exception
  - locked_by_merge
  - skip_new_deleted
  - stage_cannot_del_val
  - stage_update_rip

## üîñ –í—ã–≤–æ–¥—ã
–í —Ö–æ–¥–µ –∞–Ω–∞–ª–∏–∑–∞ –±—ã–ª —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π csv-–æ—Ç—á–µ—Ç –∏ —Ä–∞—Å—á–∏—Ç–∞–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–∑–Ω–µ—Å—É –º–µ—Ç—Ä–∏–∫–∏. –ë–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∑–∞–±–∏—Ä–∞—é—Ç –Ω–∞ —Å–µ–±—è —Ñ–∞–∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è(insert/update) –∏ —Ñ–∞–∑—ã –ø–æ–∏—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤. –°–∏—Å—Ç–µ–º—É –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å, —Ç–∞–∫ –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ 2 —Ñ–∞–∑—ã –∏–º–µ—é—Ç —Å–∏–ª—å–Ω—É—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é —Å –æ–±—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ü—Ä–∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ 10%, –æ–±—â–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è —Å–Ω–∏–∑–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É.

## üíª –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `pandas` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö  
- `numpy` ‚Äî —á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã  
- `matplotlib`, `seaborn` ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è   